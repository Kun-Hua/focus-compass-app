# Focus Compass（複利指南針）頁面功能概覽

本文件從「使用者要完成的任務」角度，總覽每個頁面的角色與關鍵功能，作為設計、開發與測試的快速索引。

## 目錄

- [Vision 願景](#vision-願景)
- [Execute 行動](#execute-行動)
- [Dashboard 儀表板](#dashboard-儀表板)
- [Focus League 專注聯賽](#focus-league-專注聯賽)
- [Partner 夥伴](#partner-夥伴)
- [Settings 設定](#settings-設定)

---

## Vision 願景

| 面向 | 說明 |
| :--- | :--- |
| 主要任務 | 釐清長期方向、套用 5/25 法則挑出最多 5 個核心目標，並拆解成可執行的週承諾與日曆任務。 |
| 核心角色 | 「目標與承諾引擎」：所有後續專注紀錄、Dashboard KPI 都以這裡的設定為錨點。 |
| 代表功能 | 以終為始問卷（可勾選略過）、巴菲特 5/25 拖放分類、目標 rename / 刪除、小目標 (Subgoal) 管理、年度／季度／月度／週度拆解、週承諾時數欄位、承諾月曆任務排程、MIT 任務標記與與 Dashboard / Execute 的雙向連動。 |
| 資料來源 / 去向 | Supabase `Goal` / `Subgoal`；localStorage `vision.step1Answers`, `vision.skipStep1`, `commitment_goal_plans_v3`, `commitment_calendar_tasks_v3`。輸出目標與任務到 Execute、Dashboard。 |
| 進入點 | 路由：`/vision` |

---

## Execute 行動

| 面向 | 說明 |
| :--- | :--- |
| 主要任務 | 針對已設定的目標／小目標，進行專注計時並建立具誠實度標記的紀錄。 |
| 核心角色 | 「專注計時中心」：唯一寫入 `FocusSessionLog` 的前端入口。 |
| 代表功能 | 目標／小目標下拉選擇（支援 URL `?goalId=<uuid>` 預選）、Honesty Mode 切換、三種計時器：碼表、番茄鐘、縮時錄影 (Timelapse Recorder)、計時結束後強制回填中斷原因與次數、將紀錄寫入 Supabase `FocusSessionLog`。 |
| Premium 元素 | 番茄鐘與縮時錄影可視為進階功能（正式版可收斂到訂閱方案）。 |
| 資料來源 / 去向 | 讀取 GoalsProvider（含 Vision 的拆解與週承諾）、Supabase `Goal` / `Subgoal`；寫入 Supabase `FocusSessionLog` 作為 Dashboard、League、Partner 與程式化建議的唯一數據來源。 |
| 進入點 | 路由：`/execute` |

---

## Dashboard 儀表板

| 面向 | 說明 |
| :--- | :--- |
| 主要任務 | 提供「今日／本週應該做什麼」的單一決策介面，並回饋承諾達成度與高誠實度時間投資狀況。 |
| 核心角色 | 「每日決策中心」：整合 MIT、KPI、角色平衡、熱力圖與程式化診斷。 |
| 代表功能 | 每日 MIT 卡片（從 Vision 月曆任務中選一個）、`useWeeklyStreak` 週承諾連勝、淨投入／總投入／誠實度等 KPI、目標／子目標統計表、角色平衡圓餅圖、專注效率熱力圖、本週承諾達標檢查、反思／數據診斷卡（原 `/review-data` 內容已整合）。 |
| 資料來源 | GoalsProvider、Supabase `FocusSessionLog`、localStorage `dashboard_mit_<date>`；部分診斷邏輯使用程式化 IF/THEN 規則。 |
| 進入點 | 路由：`/dashboard`（原 `/review-data` 會導向此頁） |

---

## Focus League 專注聯賽

| 面向 | 說明 |
| :--- | :--- |
| 主要任務 | 透過聯賽段位與徽章，將「高誠實度時間」社會化，提供外部問責與排名刺激。 |
| 核心角色 | 「跨用戶競賽層」：呈現個人在同級聯賽中的相對位置與歷史軌跡。 |
| 代表功能 | 段位卡 (LeagueCard)、Supabase Realtime 即時排行榜 (FocusLeagueLeaderboard)、徽章牆、聯賽歷史紀錄。 |
| 資料來源 | Supabase `focus_league_user_details`, `focus_league_user_stats`，RPC `getLeagues`, `getMyLeagueMapping`, `getMyLeagueHistory`, `getMyBadges`。 |
| 進入點 | 路由：`/league` |

---

## Partner 夥伴

| 面向 | 說明 |
| :--- | :--- |
| 主要任務 | 建立一對一問責關係，彼此比較進度，並管理邀請與可視範圍。 |
| 核心角色 | 「深度問責關係」：補足 League 的群體競賽，以高信任度的小圈子持續追蹤。 |
| 代表功能 | 日／週／月統計切換、淨投入／誠實度／中斷頻率／總投入／承諾達成率比較、夥伴排行榜視圖、匿名搜尋暱稱邀請、接受／拒絕／撤銷／刪除流程、指標可見性勾選。 |
| 限制 | 每位使用者同時 pending + active 夥伴數量上限為 5。 |
| 資料來源 | Supabase `AccountabilityPartner`, `profiles`，RPC `get_partner_weekly`, `computeWeeklyMetricsLocal`。 |
| 進入點 | 路由：`/partner` |

---

## Settings 設定

| 面向 | 說明 |
| :--- | :--- |
| 主要任務 | 集中管理帳號與系統層級設定，目前為未來擴充預留。 |
| 核心角色 | 「系統設定容器」：未來承接付費方案、通知偏好、語系切換、帳號管理等。 |
| 代表功能 | 目前僅提供導覽入口與設定區塊佈局骨架（占位）。 |
| 進入點 | 路由：`/settings` |

---

> 若新增其他頁面或功能模組，請務必同步更新此文件與《產品規格說明書》，確保文件與實際體驗保持一致。

