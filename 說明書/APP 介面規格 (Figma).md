# Focus Compass APP 介面規格（Figma 專用）

> 目的：本文件將「現有 Web 版功能」轉譯成「行動 App 版畫面需求」，提供 Figma 設計用的介面藍圖。
> 範圍：僅定義介面與互動，不牽涉實作細節；未修改任何現有程式碼或文件。

---

## 1. 全域資訊架構（App 版本）

### 1.1 主導航結構（底部 Tab Bar）

建議以 **底部 Tab Bar** 為主導航，每個 Tab 對應一個核心任務模組：

1. **Home（Dashboard）**
   - 對應 Web 的 `/dashboard`（含原 `/review-data`）
   - 角色：每日決策中心（MIT + KPI + 診斷）

2. **Focus（Execute）**
   - 對應 Web 的 `/execute`
   - 角色：專注計時與中斷紀錄的唯一入口

3. **Vision**
   - 對應 Web 的 `/vision`
   - 角色：目標設定、5/25 聚焦、目標拆解與週承諾

4. **League**
   - 對應 Web 的 `/league`
   - 角色：段位、排行榜、徽章與歷史聯賽紀錄

5. **Partner**
   - 對應 Web 的 `/partner`
   - 角色：一對一問責與比較

6. **Settings**（可放在側邊或個人頁 `Me` 中）
   - 對應 Web 的 `/settings`
   - 角色：帳號、語系、未來付費方案等系統設定

> 設計建議：在 Figma 中用一頁「App Sitemap」Frame，畫出上述 Tab + 重要子畫面的 Flow，標註對應 Web 路由與資料來源。

### 1.2 共用設計元素

- **狀態列 / 頂部 App Bar**
  - 左側：頁面標題（例如「Home」「Focus」「Vision」）
  - 右側：常用入口（例如使用者頭像、通知、設定 Icon）
- **主要操作按鈕（Primary CTA）**
  - 每頁最多 1–2 個主行動，使用一致的按鈕樣式（顏色、圓角、陰影）。
- **顏色與語氣**
  - 延續產品哲學：
    - 綠 / 藍：代表「高誠實度、達標、穩定成長」
    - 黃 / 橘：提醒或需要注意
    - 紅：明顯失衡或違反承諾

### 1.3 視覺風格原則：冷靜生產力極簡風

- **整體感受**
  - 關鍵字：冷靜、專注、穩定、極簡。
  - 介面避免強烈對比與複雜裝飾，讓使用者把注意力放在「當下應該做什麼」。
- **色彩運用**
  - 主色採低飽和冷色系（藍 / 青綠），作為背景與主要行動按鈕色。
  - 暖色（橙 / 琥珀）僅用於提醒、警示與重要提示，避免造成焦慮感。
  - 大面積背景使用高亮度淺灰或接近白色，搭配細緻分隔線，而非厚重邊框。
- **資訊層級**
  - 透過字級、粗細、行高與留白建立層級，盡量少用多餘線條或色塊。
  - 每個畫面最多 2–3 個需要決策的主要元素，其餘資訊以次要色或折疊方式呈現。
- **元件風格**
  - 卡片採中等圓角與柔和陰影，避免強烈立體或玻璃擬態效果。
  - Icon 以線性、簡潔為主，顏色數量控制在 1–2 種。
- **專注情境**
  - Focus 畫面中，計時器數字應是視覺中心，其餘元素後退為輔助。
  - Modal（例如中斷紀錄）開啟時，背景需明顯降噪／變暗，強調單一任務。

---

## 2. Home（Dashboard）畫面規格

### 2.1 使用情境

- 使用者打開 App 時的預設首頁。
- 需要在 10 秒內知道：
  - 今天最重要的任務是什麼？（MIT）
  - 本週承諾 vs 實際淨投入狀況？
  - 哪些目標或時間段出了問題？（診斷）

### 2.2 版面分區

建議手機直向版面自上而下區分：

1. **Header 區**
   - 顯示：
     - 左：標題 `Dashboard` 或 `Today`
     - 右：使用者頭像（點擊進入 Profile/Settings）、當日日期

2. **MIT 卡片區（Most Important Task）**
   - 內容：
     - 今日日期 & 標題：「今日 MIT」
     - MIT 任務標題（來自 Vision 月曆任務）
     - 所屬目標 Tag（顯示 Goal 名稱 / 顏色）
     - 狀態：
       - 未選擇（空狀態 +「從任務中選擇」按鈕）
       - 已選擇（顯示任務摘要 + 「開始專注」按鈕）
     - 互動：
       - 點擊「選擇 MIT」→ 打開 Bottom Sheet 列出今日相關任務
       - 點擊「開始專注」→ 導航到 `Focus` Tab，並帶入對應 `goalId` / 任務

3. **KPI 區（核心指標卡片）**
   - 三個主要指標，置於橫向卡片或 2×2 卡片網格：
     - **本週承諾總時數**（目標值）
     - **本週淨投入分鐘（honest）**
     - **誠實度 %（淨投入 / 總投入）**
   - 每張卡片需有：
     - 數字
     - 單位
     - 簡短說明文字
     - 顏色狀態（達標 / 接近 / 未達）

4. **進度與分布視覺化區**
   - 元件示例：
     - 目標貢獻條／表格：列出 Core goals，顯示各自投入分鐘數
     - 角色圓餅圖：按照 `linked_role` 匯總投入
     - 時間熱力圖：簡化為「一週 × 時段」色塊顯示高效時間
   - Figma 中可設計為可左右滑動的卡片 Carousel。

5. **程式化診斷區（Diagnostics）**
   - 顯示前三大中斷原因（來自 `useFocusDiagnostics`）：
     - 每張卡：原因標題 + 發生次數 + 對應建議文案
   - 顯示方式：
     - 卡片列表，支援展開更多細節
   - 空狀態：
     - 若資料不足，顯示「先累積幾天專注紀錄再來」的引導文案與連結到 `Focus`。

### 2.3 狀態與互動

- **Loading 狀態**：
  - KPI 與圖表使用 Skeleton Placeholder。
- **無資料狀態**：
  - MIT：尚未選擇 → 顯示示意插圖＋引導文字。
  - KPI / 圖表：顯示空圖表與說明：「開始第一次專注後，這裡會出現你的數據」。

---

## 3. Focus（Execute）畫面規格

### 3.1 使用情境

- 使用者在已設定的目標 / 小目標下啟動專注計時，並於結束後填寫中斷原因與次數。
- 所有 `FocusSessionLog` 均從此畫面寫入 Supabase。

### 3.2 版面分區

1. **Header 區**
   - 標題：`Focus` 或 `專注模式`
   - 次標題顯示目前選定目標名稱（若未選，顯示「請先選擇目標」）

2. **目標與小目標選擇區**
   - 元件：兩個下拉選單或選擇器：
     - 目標（Core Top5 + 其他）
     - 小目標（取決於目前目標）
   - 行為：
     - 切換目標時，小目標清空
     - 可從 Dashboard/MIT 帶入預選 `goalId`

3. **Honesty Mode 區**
   - Toggle 開關 + 說明文字：
     - 開：高誠實度專注，將被標記為 `honesty_mode = TRUE`
     - 關：一般紀錄
   - 可使用顏色與 Icon 強調狀態（例如盾牌圖示代表誠實模式）

4. **計時器模式 Tab 區**
   - 三個 Tab：
     - **Stopwatch**（碼表）
     - **Pomodoro**（番茄鐘）
     - **Timelapse**（縮時錄影）
   - Tab 內容應共用以下結構：
     - 主要時間顯示（大型字體）
     - 副標（例如預計結束時間）
     - 開始 / 暫停 / 結束 按鈕

5. **中斷紀錄彈窗（必填 Modal）**
   - 當任一計時器結束或使用者按「完成」時，彈出全螢幕（或底部滑出）Modal：
     - 選擇中斷原因：常見原因列表（通知、社群、他人打擾、疲勞…）
     - 中斷次數：Stepper 或數字輸入
     - 快速選項：「完全專注，無中斷」
     - 按鈕：
       - 主要：`儲存紀錄`
       - 次要：`取消`（但可以有警示文案，避免輕易放棄問責）

6. **完成提示 / 下一步建議區**
   - 儲存成功後顯示 Toast 或小卡片：
     - 顯示本次專注分鐘數與目標名稱
     - 提供快速連結回 `Home` 或再啟動一輪專注

### 3.3 狀態與互動

- 若未選擇目標就按開始：
  - 顯示錯誤提示並禁止開始。
- 若中斷 Modal 未提交就關閉：
  - 彈出確認：「此專注紀錄將不會儲存」

---

## 4. Vision 畫面規格

### 4.1 使用情境

- 使用者定期回到此處：
  - 更新長期願景（以終為始問卷）
  - 維護目標列表並套用 5/25 法則（Core vs Avoid）
  - 為 Core Top5 設定年/季/月/週拆解與週承諾
  - 為未來幾週安排承諾月曆任務

### 4.2 版面分區

1. **以終為始問卷區（可折疊）**
   - 類型：多個開放式問題卡片（80 歲回顧、理想一天、三大價值觀…）
   - UI：
     - 每題一張卡片 + 多行文字輸入框
     - 頂部有「我已清楚目標，暫時跳過」勾選框，勾選後整區可摺疊收起

2. **5/25 目標清單與分類區**
   - Layout：上下或左右兩柱：
     - 左：Core（顯示最多 5 個）
     - 右：Avoid（避免清單）
   - 功能：
     - 新增目標輸入列（加入 Avoid 列表）
     - 目標卡可拖拉移動 Core/Avoid（Figma 可標註「需 DnD 效果」）
     - 錯誤訊息區（例如超過 5 個 Core 時）

3. **Core 目標詳細拆解區（階梯 + Subgoals）**
   - 每個 Core 目標有獨立卡片：
     - 上：目標名稱 + 類別 Tag（Core）
     - 中：Subgoal 列表（可新增 / 編輯 / 刪除 / 拖拉排序）
     - 下：年／季／月／週目標文字 + 週承諾時數輸入欄位

4. **承諾月曆區**
   - 顯示當月 5×7 Grid（週一起算）
   - 每格：日期 + 任務列表縮略（最多顯示 1–2 個，其他用「+x」）
   - 互動：
     - 點日格 → 打開當日任務清單（Bottom Sheet）
     - 新增任務：輸入任務文字 + 選擇綁定 Core 目標
     - 勾選完成 → 變更樣式（例如 strike-through 或底色）

### 4.3 與其他頁面的關聯（Figma 註記）

- MIT 選擇來源：Vision 月曆中的「任務」。
- Dashboard / Focus 會讀取：
  - Core Top5
  - 每個目標的 weeklyHours 週承諾

---

## 5. League 畫面規格

### 5.1 使用情境

- 使用者想知道：
  - 自己在聯賽中的等級、排名與升降級狀態
  - 本週與過去的高誠實度分鐘變化
  - 解鎖了哪些徽章

### 5.2 版面分區

1. **段位卡（League Card）**
   - 顯示：
     - 當前聯賽名稱（例如 Bronze / Silver / Gold）
     - 本週高誠實度分鐘
     - 升級條件與目前進度條
     - 若接近降級門檻，顯示警示狀態

2. **即時排行榜區（Leaderboard）**
   - 以列表顯示同一聯賽內的使用者：
     - 暱稱
     - 本週高誠實度分鐘
     - 排名（數字 + 箭頭／趨勢）
   - 支援下拉更新（Pull to refresh）的視覺提示

3. **徽章牆區（Badges）**
   - 網格或橫向 Scroll：
     - 已解鎖：彩色顯示 + 解鎖日期
     - 未解鎖：灰階或鎖頭 Icon

4. **歷史紀錄區（History）**
   - 時序列表：
     - 每週起始日期
     - 所在聯賽
     - 排名與本週高誠實度分鐘
   - 可用折線圖輔助視覺化段位升降

---

## 6. Partner 畫面規格

### 6.1 使用情境

- 使用者與 1–5 位高信任夥伴互相比較專注與承諾進度。
- 管理邀請、接受 / 拒絕、指標可視範圍。

### 6.2 版面分區

1. **統計範圍與排序控制列**
   - Segmented control：`日 / 週 / 月`
   - 排序下拉：`淨投入 / 承諾達成率 / 誠實度 / 中斷頻率 / 總投入`

2. **夥伴列表卡片**
   - 每張卡顯示：
     - 對方暱稱
     - 核心指標（5 個中的部分或全部）
     - 趨勢圖示（簡化箭頭即可）
   - 卡片可展開顯示更多細節（例如最近 7 天圖表）

3. **邀請與審核區**
   - 「邀請夥伴」按鈕 → 打開搜尋面板：
     - 搜尋欄（輸入暱稱）
     - 搜尋結果列表＋「邀請」按鈕
   - Pending 區：列出待接受 / 已送出邀請，支援接受 / 拒絕 / 取消

4. **可視指標設定區**
   - 對每個夥伴，提供開關：
     - 淨承諾分鐘
     - 總投入
     - 誠實度
     - 中斷頻率
     - 承諾達成率
   - Figma 中可設計為「彈出設定面板」或在夥伴詳細頁中呈現。

---

## 7. Settings / Profile 畫面規格

### 7.1 使用情境

- 管理帳號與全域設定，目前以預留骨架為主。

### 7.2 內容區塊

- 帳號資訊卡：
  - 頭像、名稱、Email（或匿名 ID）
- 語系切換
- 通知偏好（未來）
- 付費方案入口（未來）

Figma 可先設計為簡潔的列表式設定頁，保留足夠擴充空間。

---

## 8. Figma 製作注意事項

1. **平台對齊**
   - 以行動 App 為唯一產品重心，不再設計獨立 Web 版本。
   - Frame 尺寸建議以常見裝置（如 iPhone 14 Pro）為基準，必須全程使用 Auto Layout / Constraints 設計，確保在不同螢幕尺寸（高度、寬度比例）與安全區（瀏海、圓角）下都能自動縮放與合理重排。

2. **狀態設計完整性**
   - 每個關鍵畫面至少應有：
     - 初始 / 空狀態
     - 正常有資料狀態
     - Loading / Skeleton 狀態
     - 錯誤提示狀態

3. **資料對應註記**
   - 在 Figma 中用註解標註：
     - 每個卡片或指標來源的資料表／欄位（例如：`FocusSessionLog.honesty_mode`）
     - 是否來自 Supabase 還是本地儲存（例如 localStorage / 未來 AsyncStorage）

4. **互動 Flow**
   - 針對以下關鍵流程建立 Prototype Flow：
     - Vision 設定目標 → Dashboard 選 MIT → Focus 啟動專注 → 專注結束填寫中斷 → Dashboard KPI 更新
     - League 段位變化與排行榜刷新
     - Partner 邀請與接受 / 拒絕流程

---

（本文件僅為介面與互動規格說明，實際實作細節請參考《產品規格說明書》與《APP 遷移技術規劃 (Web to Expo React Native).md》。）
